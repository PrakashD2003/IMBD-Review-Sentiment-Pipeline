schema: '2.0'
stages:
  data_ingestion:
    cmd: python -m services.training.pipelines.training_pipeline --step 
      ingestion
    deps:
    - path: params.yaml
      hash: md5
      md5: 870138b4c90a3cd54448e4656049ca2e
      size: 892
    - path: services/training/data/data_ingestion.py
      hash: md5
      md5: c5d61b05cfdd53d2d06e02ba30b48c3d
      size: 8219
    - path: services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    params:
      params.yaml:
        data_ingestion_params.random_state: 42
        data_ingestion_params.shuffle: true
        data_ingestion_params.test_size: 0.2
    outs:
    - path: artifacts/data/interim/test
      hash: md5
      md5: 5a5071302e770a3e581ddad199f98def.dir
      size: 8647725
      nfiles: 3
    - path: artifacts/data/interim/train
      hash: md5
      md5: c509e4acab63abc5c4062438a611e8eb.dir
      size: 34064652
      nfiles: 3
    - path: artifacts/data/raw
      hash: md5
      md5: 24b6807b29d6e75b4e1d0c6fad7ecab7.dir
      size: 42675542
      nfiles: 1
  data_preprocessing:
    cmd: python -m services.training.pipelines.training_pipeline --step 
      preprocess
    deps:
    - path: ./services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    - path: artifacts/data/interim/test
      hash: md5
      md5: 5a5071302e770a3e581ddad199f98def.dir
      size: 8647725
      nfiles: 3
    - path: artifacts/data/interim/train
      hash: md5
      md5: c509e4acab63abc5c4062438a611e8eb.dir
      size: 34064652
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 870138b4c90a3cd54448e4656049ca2e
      size: 892
    - path: services/training/data/data_preprocessing.py
      hash: md5
      md5: b3eb1d87267ae60f12ef641f313596a1
      size: 8684
    params:
      params.yaml:
        data_preprocessing_params.text_column_for_preprocessing: review
    outs:
    - path: artifacts/data/processed/preprocessed_test_data
      hash: md5
      md5: 833b5dd4879b34c83c96c9c817b0b4e5.dir
      size: 5403825
      nfiles: 3
    - path: artifacts/data/processed/preprocessed_training_data
      hash: md5
      md5: c8c93c3fd1d44fc0711833e426f5e98c.dir
      size: 21252990
      nfiles: 3
  feature_engineering:
    cmd: python -m services.training.pipelines.training_pipeline --step fe
    deps:
    - path: ./services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    - path: artifacts/data/processed/preprocessed_test_data
      hash: md5
      md5: 833b5dd4879b34c83c96c9c817b0b4e5.dir
      size: 5403825
      nfiles: 3
    - path: artifacts/data/processed/preprocessed_training_data
      hash: md5
      md5: c8c93c3fd1d44fc0711833e426f5e98c.dir
      size: 21252990
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 870138b4c90a3cd54448e4656049ca2e
      size: 892
    - path: services/training/features/feature_engineering.py
      hash: md5
      md5: 0f0378021a5851684069f233805d7778
      size: 11399
    params:
      params.yaml:
        TF-IDF_Params.max_df: 0.9
        TF-IDF_Params.max_features: 5000
        TF-IDF_Params.min_df: 2
        TF-IDF_Params.ngram_range:
        - 1
        - 2
        feature_engineering_params.text_column_for_engineering: review
    outs:
    - path: artifacts/data/feature_engineered/feature_engineered_test_data
      hash: md5
      md5: 135c7f317981ce5105b003ec9e12cf57.dir
      size: 20818039
      nfiles: 3
    - path: artifacts/data/feature_engineered/feature_engineered_training_data
      hash: md5
      md5: f4a56e1887fdcb02a299ae12dae60b4c.dir
      size: 56325552
      nfiles: 3
    - path: artifacts/saved_models/vectorizer
      hash: md5
      md5: 85089f0ebd97355a8cf5b5f4f9793d60.dir
      size: 186402
      nfiles: 1
  model_training:
    cmd: python -m services.training.pipelines.training_pipeline --step train
    deps:
    - path: ./services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    - path: artifacts/data/feature_engineered/feature_engineered_training_data
      hash: md5
      md5: f4a56e1887fdcb02a299ae12dae60b4c.dir
      size: 56325552
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 870138b4c90a3cd54448e4656049ca2e
      size: 892
    - path: services/training/model/train_model.py
      hash: md5
      md5: cc3bcdd5d5dfd9ceeb55e0e34160b334
      size: 6130
    params:
      params.yaml:
        Model_Params.C: 0.1
        Model_Params.max_iter: 300
        Model_Params.penalty: l2
        Model_Params.random_state: 42
        Model_Params.solver: saga
        Model_Params.tol: 0.001
        Target_Col: sentiment
    outs:
    - path: artifacts/saved_models/model
      hash: md5
      md5: f3bc99559f9bc3643c8dfae347d755cf.dir
      size: 40770
      nfiles: 1
  model_evaluation:
    cmd: python -m services.training.pipelines.training_pipeline --step evaluate
    deps:
    - path: ./services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    - path: artifacts/data/feature_engineered/feature_engineered_test_data
      hash: md5
      md5: 135c7f317981ce5105b003ec9e12cf57.dir
      size: 20818039
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 870138b4c90a3cd54448e4656049ca2e
      size: 892
    - path: services/training/model/evaluate_model.py
      hash: md5
      md5: 21398bebe52f74ca23c766e89230a3b1
      size: 8301
    params:
      params.yaml:
        Target_Col: sentiment
    outs:
    - path: artifacts/reports/performance_metrics.json
      hash: md5
      md5: 61c7d24c054bb5ace741dafb7683f2a8
      size: 150
  model_registry:
    cmd: python -m services.training.pipelines.training_pipeline --step register
    deps:
    - path: ./services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    - path: artifacts/reports/performance_metrics.json
      hash: md5
      md5: 61c7d24c054bb5ace741dafb7683f2a8
      size: 150
    - path: artifacts/saved_models/model
      hash: md5
      md5: f3bc99559f9bc3643c8dfae347d755cf.dir
      size: 40770
      nfiles: 1
    - path: artifacts/saved_models/vectorizer
      hash: md5
      md5: 85089f0ebd97355a8cf5b5f4f9793d60.dir
      size: 186402
      nfiles: 1
    - path: params.yaml
      hash: md5
      md5: 870138b4c90a3cd54448e4656049ca2e
      size: 892
    - path: services/training/model/register_model.py
      hash: md5
      md5: 2b7af0e0d612e3599378059c5665367e
      size: 9971
