schema: '2.0'
stages:
  data_ingestion:
    cmd: python -m services.training.pipelines.training_pipeline --step 
      ingestion
    deps:
    - path: params.yaml
      hash: md5
      md5: 911251216ef39be25531d08f2dd15950
      size: 1760
    - path: services/training/data/data_ingestion.py
      hash: md5
      md5: 7c3c86ecc2d4b68f6d7c7a81b8d701bf
      size: 8413
    - path: services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    params:
      params.yaml:
        data_ingestion.shuffle: true
        data_ingestion.test_size: 0.2
        global_params.random_state: 42
    outs:
    - path: artifacts/data/interim/test
      hash: md5
      md5: 5a5071302e770a3e581ddad199f98def.dir
      size: 8647725
      nfiles: 3
    - path: artifacts/data/interim/train
      hash: md5
      md5: c509e4acab63abc5c4062438a611e8eb.dir
      size: 34064652
      nfiles: 3
    - path: artifacts/data/raw
      hash: md5
      md5: 24b6807b29d6e75b4e1d0c6fad7ecab7.dir
      size: 42675542
      nfiles: 1
  data_preprocessing:
    cmd: python -m services.training.pipelines.training_pipeline --step 
      preprocess
    deps:
    - path: ./services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    - path: artifacts/data/interim/test
      hash: md5
      md5: 5a5071302e770a3e581ddad199f98def.dir
      size: 8647725
      nfiles: 3
    - path: artifacts/data/interim/train
      hash: md5
      md5: c509e4acab63abc5c4062438a611e8eb.dir
      size: 34064652
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 911251216ef39be25531d08f2dd15950
      size: 1760
    - path: services/training/data/data_preprocessing.py
      hash: md5
      md5: 4a4f550e874d9e4bd0ff8befec30c251
      size: 9249
    params:
      params.yaml:
        global_params.text_column: review
    outs:
    - path: artifacts/data/processed/preprocessed_test_data
      hash: md5
      md5: 85c1321cd0326dd42ca4ca2ce509c675.dir
      size: 5460436
      nfiles: 3
    - path: artifacts/data/processed/preprocessed_training_data
      hash: md5
      md5: b77bb794bc8a1cdd5ccbf2d91a36b05d.dir
      size: 21486698
      nfiles: 3
  feature_engineering:
    cmd: python -m services.training.pipelines.training_pipeline --step fe
    deps:
    - path: ./services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    - path: artifacts/data/processed/preprocessed_test_data
      hash: md5
      md5: 85c1321cd0326dd42ca4ca2ce509c675.dir
      size: 5460436
      nfiles: 3
    - path: artifacts/data/processed/preprocessed_training_data
      hash: md5
      md5: b77bb794bc8a1cdd5ccbf2d91a36b05d.dir
      size: 21486698
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 911251216ef39be25531d08f2dd15950
      size: 1760
    - path: services/training/features/feature_engineering.py
      hash: md5
      md5: 6d0a4d11747cb2aa58afdb9b7859c0bc
      size: 11385
    params:
      params.yaml:
        feature_engineering.tfidf:
          max_df: 0.9
          max_features: 10000
          min_df: 2
          ngram_range:
          - 1
          - 3
        global_params.text_column: review
    outs:
    - path: artifacts/data/feature_engineered/feature_engineered_test_data
      hash: md5
      md5: 499cdd8953adda3bd3c310a6cca00df1.dir
      size: 31821959
      nfiles: 3
    - path: artifacts/data/feature_engineered/feature_engineered_training_data
      hash: md5
      md5: 9cb87197b9268b9cf20b490f87a7fb01.dir
      size: 73146954
      nfiles: 3
    - path: artifacts/saved_models/vectorizer
      hash: md5
      md5: 63fcb94e3fd22d49eff187aa91f1b000.dir
      size: 380079
      nfiles: 1
  model_training:
    cmd: python -m services.training.pipelines.training_pipeline --step train
    deps:
    - path: ./services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    - path: artifacts/data/feature_engineered/feature_engineered_training_data
      hash: md5
      md5: 9cb87197b9268b9cf20b490f87a7fb01.dir
      size: 73146954
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 911251216ef39be25531d08f2dd15950
      size: 1760
    - path: services/training/model/train_model.py
      hash: md5
      md5: d201256daa8c0f444adc1ad17d583a79
      size: 7235
    params:
      params.yaml:
        global_params.target_column: sentiment
        model_training.lightgbm:
          n_estimators: 200
          learning_rate: 0.1
          num_leaves: 31
          reg_alpha: 0.1
          reg_lambda: 0.1
        model_training.logistic_regression:
          C: 0.05
          penalty: l2
          solver: saga
          max_iter: 300
          tol: 0.001
          n_jobs: -1
        model_training.model_to_use: LightGBM
    outs:
    - path: artifacts/saved_models/model
      hash: md5
      md5: f252842d6d109202a1a53912a600fdde.dir
      size: 1103988
      nfiles: 1
  model_evaluation:
    cmd: python -m services.training.pipelines.training_pipeline --step evaluate
    deps:
    - path: ./services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    - path: artifacts/data/feature_engineered/feature_engineered_test_data
      hash: md5
      md5: 499cdd8953adda3bd3c310a6cca00df1.dir
      size: 31821959
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 911251216ef39be25531d08f2dd15950
      size: 1760
    - path: services/training/model/evaluate_model.py
      hash: md5
      md5: d9cfde77b571d5a41d58fc5c8b0d6ccf
      size: 8317
    params:
      params.yaml:
        global_params.target_column: sentiment
    outs:
    - path: artifacts/reports/performance_metrics.json
      hash: md5
      md5: da46e85ed69bd096c4bc2eae83a03bab
      size: 149
  model_registry:
    cmd: python -m services.training.pipelines.training_pipeline --step register
    deps:
    - path: ./services/training/pipelines/training_pipeline.py
      hash: md5
      md5: 9b16d6a6d17b2c0ff41f2af10be9637d
      size: 2187
    - path: artifacts/reports/performance_metrics.json
      hash: md5
      md5: da46e85ed69bd096c4bc2eae83a03bab
      size: 149
    - path: artifacts/saved_models/model
      hash: md5
      md5: f252842d6d109202a1a53912a600fdde.dir
      size: 1103988
      nfiles: 1
    - path: artifacts/saved_models/vectorizer
      hash: md5
      md5: 63fcb94e3fd22d49eff187aa91f1b000.dir
      size: 380079
      nfiles: 1
    - path: params.yaml
      hash: md5
      md5: 911251216ef39be25531d08f2dd15950
      size: 1760
    - path: services/training/model/register_model.py
      hash: md5
      md5: 73231bca51172b219e0be7150aafbcc8
      size: 10393
